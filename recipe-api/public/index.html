<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Base - Culinary Intelligence</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Poppins:wght@300;400;500;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#254a31', bg: '#fcfaf7', border: '#e5e0d8', text: { main: '#1a3322', muted: '#5c5446', light: '#8c857b' } },
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Poppins', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    boxShadow: { 'ceramic': '0 4px 20px -2px rgba(37, 74, 49, 0.05), 0 0 1px rgba(37, 74, 49, 0.1)' }
                }
            }
        }
    </script>
    <style>
        body { background-color: #fcfaf7; color: #1a3322; overflow-x: hidden; }
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.6; pointer-events: none; }
        .btn-primary { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1.75rem; border-radius: 9999px; background-color: #254a31; color: #ffffff; font-family: 'Poppins', sans-serif; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(37, 74, 49, 0.15); cursor: pointer; }
        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 8px 16px rgba(37, 74, 49, 0.2); background-color: #1e3d28; }
        .btn-secondary { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1.75rem; border-radius: 9999px; background-color: #ffffff; color: #254a31; border: 1px solid #e5e0d8; font-family: 'Poppins', sans-serif; font-weight: 500; transition: all 0.3s ease; }
        .btn-secondary:hover { border-color: #254a31; background-color: #fcfaf7; }
        .card-ceramic { background: #ffffff; border: 1px solid #e5e0d8; border-radius: 1.25rem; box-shadow: 0 4px 20px -2px rgba(37, 74, 49, 0.05); transition: all 0.4s ease; }
        .card-ceramic:hover { transform: translateY(-2px); box-shadow: 0 12px 30px -4px rgba(37, 74, 49, 0.08); border-color: #d1ccbc; }
        .chip { display: inline-flex; align-items: center; padding: 0.25rem 0.75rem; background-color: #fcfaf7; border: 1px solid #e5e0d8; border-radius: 9999px; font-size: 0.75rem; color: #5c5446; cursor: pointer; transition: all 0.2s; }
        .chip:hover { border-color: #254a31; color: #254a31; background-color: #ffffff; }
        .chip.active { background-color: #254a31; color: #ffffff; border-color: #254a31; }
        .mock-app { background: white; border-radius: 20px; overflow: hidden; border: 1px solid #e5e0d8; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="antialiased">

    <canvas id="bg-canvas"></canvas>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 transition-all duration-300" id="navbar">
        <div class="w-full flex justify-between items-center bg-[#fcfaf7]/90 backdrop-blur-xl border-b border-white/40 shadow-sm px-6 py-4">
            <a href="/" class="flex items-center gap-2">
                <img src="/logo.svg?v=2" alt="Recipe Base" class="h-6 w-auto">
            </a>
            <div class="hidden md:flex items-center gap-8">
                <a href="/recipes.html" class="text-sm font-medium text-text-muted hover:text-primary transition-colors">Products</a>
                <a href="/lab.html" class="text-sm font-medium text-text-muted hover:text-primary transition-colors">Solutions</a>
                <a href="/docs.html" class="text-sm font-medium text-text-muted hover:text-primary transition-colors">Developers</a>
            </div>
            <div class="flex items-center gap-3">
                <a href="/admin.html" class="hidden md:block text-xs font-bold uppercase tracking-widest text-primary border border-primary/20 px-4 py-2 rounded-full hover:bg-primary hover:text-white transition-all">System</a>
                <a href="/lab.html" class="hidden md:block px-5 py-2 bg-primary text-white text-sm font-medium rounded-full hover:bg-primary/90 transition-all shadow-md shadow-primary/20">Launch App</a>
                <button id="mobile-menu-toggle" class="md:hidden p-2 text-primary"><i data-lucide="menu" class="w-6 h-6"></i></button>
            </div>
        </div>
    </nav>

    <div id="mobile-menu" class="fixed inset-0 z-[60] bg-[#fcfaf7] transform translate-x-full transition-transform duration-300 flex flex-col justify-center items-center gap-8 md:hidden">
        <button id="mobile-menu-close" class="absolute top-6 right-6 text-primary p-2"><i data-lucide="x" class="w-8 h-8"></i></button>
        <a href="/" class="font-display text-3xl font-medium text-primary">Home</a>
        <a href="/recipes.html" class="font-display text-3xl font-medium text-primary">Products</a>
        <a href="/lab.html" class="font-display text-3xl font-medium text-primary">Solutions</a>
        <a href="/docs.html" class="font-display text-3xl font-medium text-primary">Developers</a>
    </div>

    <main class="pt-32">
        <!-- HERO -->
        <section class="max-w-6xl mx-auto px-6 py-12 md:py-20">
            <div class="grid lg:grid-cols-2 gap-16 items-center">
                <div>
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-border text-primary text-xs font-bold uppercase tracking-wider mb-6 shadow-sm">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> API v1.2 Live
                    </div>
                    <h1 class="font-display font-medium text-5xl md:text-6xl lg:text-7xl leading-[1.1] text-primary mb-6">Structure the <br><span class="italic text-text-muted">culinary chaos.</span></h1>
                    <p class="text-lg text-text-muted leading-relaxed mb-10 max-w-lg font-light">The infrastructure for food data. Parse unstructured recipes, normalize units, and enrich ingredients with USDA-verified nutrition in milliseconds.</p>
                    <div class="flex flex-wrap gap-4">
                        <a href="#demo" class="btn-primary">Try the Engine <i data-lucide="arrow-down" class="w-4 h-4"></i></a>
                        <a href="/docs.html" class="btn-secondary">Documentation</a>
                    </div>
                </div>
                <div class="relative">
                    <div class="bg-white border border-border rounded-3xl p-8 shadow-ceramic relative z-10 max-w-md mx-auto">
                        <div class="flex items-center justify-between mb-8 pb-4 border-b border-border">
                            <div class="flex items-center gap-3"><div class="w-10 h-10 bg-primary/5 rounded-full flex items-center justify-center text-primary"><i data-lucide="scan-line" class="w-5 h-5"></i></div><div><h3 class="font-display font-semibold text-primary">Analysis Complete</h3><p class="text-xs text-text-muted">USDA Foundation Verified</p></div></div>
                            <div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-green-50 border border-green-100"><div class="w-1.5 h-1.5 rounded-full bg-green-500"></div><span class="text-[10px] font-bold uppercase tracking-widest text-green-700">Live</span></div>
                        </div>
                        <div class="space-y-6">
                            <div class="flex items-start gap-4"><div class="w-16 h-16 rounded-xl overflow-hidden bg-earth-50 border border-border shrink-0 shadow-sm"><img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?q=80&w=200&auto=format&fit=crop" class="w-full h-full object-cover opacity-90"></div><div class="flex-1 space-y-2 pt-1"><h4 class="font-display font-medium text-lg text-primary leading-tight">Salmon & Avocado Bowl</h4><div class="flex flex-wrap gap-2"><span class="text-[10px] font-bold uppercase tracking-wider text-text-muted bg-earth-50 px-2 py-1 rounded-md border border-border">Healthy Fats</span><span class="text-[10px] font-bold uppercase tracking-wider text-text-muted bg-earth-50 px-2 py-1 rounded-md border border-border">High Protein</span></div></div></div>
                            <div class="space-y-3 pt-2">
                                <div class="flex justify-between items-center py-2 border-b border-earth-50 text-sm"><span class="text-text-muted font-medium">Calories</span><span class="font-mono font-bold text-primary">360 kcal</span></div>
                                <div class="flex justify-between items-center py-2 border-b border-earth-50 text-sm"><span class="text-text-muted font-medium">Protein</span><span class="font-mono font-bold text-primary">42g</span></div>
                                <div class="flex justify-between items-center py-2 border-b border-earth-50 text-sm"><span class="text-text-muted font-medium">Healthy Fats</span><span class="font-mono font-bold text-primary">18g</span></div>
                                <div class="flex justify-between items-center py-2 text-sm"><span class="text-text-muted font-medium">Iron</span><span class="font-mono font-bold text-primary">15% DV</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="absolute -top-4 -right-4 w-24 h-24 bg-primary/5 rounded-full blur-2xl -z-10"></div>
                    <div class="absolute -bottom-8 -left-8 w-32 h-32 bg-primary/5 rounded-full blur-2xl -z-10"></div>
                </div>
            </div>
        </section>

        <!-- DEMO SECTION -->
        <section id="demo" class="py-24 px-6 relative">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-12">
                    <span class="text-primary/60 font-bold tracking-widest text-xs uppercase mb-3 block">Live Sandbox</span>
                    <h2 class="font-display font-medium text-3xl md:text-4xl text-primary mb-4">Experience the Engine</h2>
                    <p class="text-text-muted">Select a scenario or type your own recipe.</p>
                </div>
                <div class="bg-white rounded-3xl shadow-ceramic border border-border overflow-hidden flex flex-col md:flex-row min-h-[600px]">
                    <div class="md:w-1/2 p-8 border-b md:border-b-0 md:border-r border-border flex flex-col bg-[#fcfaf7]">
                        <div class="flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide"><button onclick="setPreset('keto')" class="chip active" id="chip-keto">Keto Breakfast</button><button onclick="setPreset('vegan')" class="chip" id="chip-vegan">Vegan Salad</button><button onclick="setPreset('baking')" class="chip" id="chip-baking">Baking</button></div>
                        <textarea id="demo-input" class="flex-1 w-full bg-white border border-border rounded-xl p-5 font-mono text-sm text-text-main resize-none focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-all mb-6" placeholder="Enter ingredients...">2 eggs
1 avocado
2 slices bacon</textarea>
                        <button id="run-demo-btn" class="btn-primary w-full shadow-lg shadow-primary/20">Analyze Ingredients <i data-lucide="play" class="w-4 h-4"></i></button>
                    </div>
                    <div class="md:w-1/2 p-8 bg-white relative flex flex-col">
                        <div class="flex justify-end mb-6"><div class="bg-gray-100 p-1 rounded-lg flex text-xs font-medium"><button onclick="setView('visual')" id="btn-visual" class="px-3 py-1 rounded-md bg-white shadow-sm text-primary transition-all">Visual</button><button onclick="setView('json')" id="btn-json" class="px-3 py-1 rounded-md text-text-muted hover:text-primary transition-all">JSON</button></div></div>
                        <div id="output-area" class="flex-1 overflow-auto custom-scrollbar relative"><div id="view-visual" class="space-y-6 animate-fade-in"><div class="text-center opacity-40 mt-20"><i data-lucide="arrow-left" class="w-6 h-6 mx-auto mb-2"></i><p class="text-sm">Run analysis to see results</p></div></div><pre id="view-json" class="hidden font-mono text-xs text-text-muted bg-gray-50 p-4 rounded-xl border border-border h-full overflow-auto">// JSON output will appear here...</pre></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- USE CASES (New Section) -->
        <section class="py-32 bg-white border-y border-border">
            <div class="max-w-6xl mx-auto px-6">
                <div class="text-center mb-24">
                    <h2 class="font-display font-medium text-3xl md:text-4xl text-primary mb-4">Built for Innovators</h2>
                    <p class="text-text-muted max-w-2xl mx-auto font-light">From grocery aggregators to clinical research, see how developers are deploying Recipe Base.</p>
                </div>

                <div class="space-y-32">
                    
                    <!-- Case 1: Smart Grocery -->
                    <div class="grid lg:grid-cols-2 gap-16 items-center group">
                        <div class="order-2 lg:order-1 relative">
                            <div class="absolute inset-0 bg-gradient-to-tr from-primary/5 to-transparent rounded-3xl transform -rotate-2 scale-105"></div>
                            <div class="mock-app p-6 relative z-10 bg-white">
                                <div class="flex justify-between items-center mb-6">
                                    <h4 class="font-display font-bold text-lg text-primary">Shopping List</h4>
                                    <i data-lucide="shopping-cart" class="w-5 h-5 text-text-muted"></i>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl border border-border">
                                        <div class="w-5 h-5 rounded-full border-2 border-primary/30"></div>
                                        <div class="flex-1"><p class="text-sm font-medium text-text-main">Avocados</p><p class="text-xs text-text-muted">3 medium, ripe</p></div>
                                        <span class="text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded">Produce</span>
                                    </div>
                                    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl border border-border">
                                        <div class="w-5 h-5 rounded-full border-2 border-primary/30"></div>
                                        <div class="flex-1"><p class="text-sm font-medium text-text-main">Quinoa</p><p class="text-xs text-text-muted">500g bag</p></div>
                                        <span class="text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded">Grains</span>
                                    </div>
                                    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl border border-border opacity-50">
                                        <div class="w-5 h-5 rounded-full bg-primary flex items-center justify-center"><i data-lucide="check" class="w-3 h-3 text-white"></i></div>
                                        <div class="flex-1"><p class="text-sm font-medium text-text-main line-through">Olive Oil</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="order-1 lg:order-2">
                            <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-6"><i data-lucide="layers" class="w-6 h-6"></i></div>
                            <h3 class="font-display font-medium text-3xl text-primary mb-4">Intelligent Aggregation</h3>
                            <p class="text-text-muted text-lg leading-relaxed mb-6 font-light">Don't just list ingredients. Understand them. Our API normalizes units (cups to grams) and categories, allowing you to build smart shopping lists that automatically combine "2 onions" from one recipe and "1/2 cup onion" from another.</p>
                            <a href="/docs.html" class="text-primary font-medium hover:underline flex items-center gap-2">View Parsing Logic <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
                        </div>
                    </div>

                    <!-- Case 2: Health Tracker -->
                    <div class="grid lg:grid-cols-2 gap-16 items-center group">
                        <div>
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-green-700 mb-6"><i data-lucide="activity" class="w-6 h-6"></i></div>
                            <h3 class="font-display font-medium text-3xl text-primary mb-4">Medical-Grade Precision</h3>
                            <p class="text-text-muted text-lg leading-relaxed mb-6 font-light">Fitness apps die on data quality. We provide verified micronutrient profiles—Iron, Calcium, Vitamin A, C—so your users can track what actually matters, not just calories.</p>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center gap-3 text-text-muted"><i data-lucide="check-circle" class="w-5 h-5 text-primary"></i> USDA Foundation Data Source</li>
                                <li class="flex items-center gap-3 text-text-muted"><i data-lucide="check-circle" class="w-5 h-5 text-primary"></i> Automatic Unit Conversion</li>
                                <li class="flex items-center gap-3 text-text-muted"><i data-lucide="check-circle" class="w-5 h-5 text-primary"></i> 100+ Nutrients Available</li>
                            </ul>
                        </div>
                        <div class="relative">
                            <div class="absolute inset-0 bg-gradient-to-tl from-green-50 to-transparent rounded-3xl transform rotate-2 scale-105"></div>
                            <div class="mock-app p-8 relative z-10 bg-white">
                                <div class="flex justify-between items-center mb-8">
                                    <h4 class="font-display font-bold text-lg text-primary">Daily Goals</h4>
                                    <span class="text-xs font-mono text-text-light">Today</span>
                                </div>
                                <div class="flex justify-center mb-8 relative">
                                    <svg class="w-40 h-40 transform -rotate-90"><circle cx="80" cy="80" r="70" stroke="#f1f5f9" stroke-width="12" fill="transparent"/><circle cx="80" cy="80" r="70" stroke="#254a31" stroke-width="12" fill="transparent" stroke-dasharray="440" stroke-dashoffset="66" stroke-linecap="round"/></svg>
                                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                                        <span class="text-3xl font-bold text-primary">85%</span>
                                        <span class="text-xs text-text-muted uppercase tracking-widest">Protein</span>
                                    </div>
                                </div>
                                <div class="grid grid-cols-3 gap-4 text-center">
                                    <div><span class="block text-xs text-text-light mb-1">Iron</span><span class="font-mono font-bold text-primary">12mg</span></div>
                                    <div><span class="block text-xs text-text-light mb-1">Calcium</span><span class="font-mono font-bold text-primary">800mg</span></div>
                                    <div><span class="block text-xs text-text-light mb-1">Vit C</span><span class="font-mono font-bold text-primary">90mg</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Case 3: Dynamic Menu -->
                    <div class="grid lg:grid-cols-2 gap-16 items-center group">
                        <div class="order-2 lg:order-1 relative">
                            <div class="absolute inset-0 bg-gradient-to-tr from-orange-50 to-transparent rounded-3xl transform -rotate-1 scale-105"></div>
                            <div class="mock-app p-0 relative z-10 bg-white overflow-hidden">
                                <img src="https://images.unsplash.com/photo-1543353071-873f17a7a088?q=80&w=600&auto=format&fit=crop" class="w-full h-48 object-cover">
                                <div class="p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <div><h4 class="font-display font-bold text-lg text-primary">Spicy Basil Tofu</h4><p class="text-xs text-text-muted">with Jasmine Rice</p></div>
                                        <span class="text-lg font-bold text-primary">$14</span>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="text-[10px] font-bold uppercase tracking-wider text-orange-700 bg-orange-50 px-2 py-1 rounded border border-orange-100">Spicy</span>
                                        <span class="text-[10px] font-bold uppercase tracking-wider text-green-700 bg-green-50 px-2 py-1 rounded border border-green-100">Vegan</span>
                                        <span class="text-[10px] font-bold uppercase tracking-wider text-blue-700 bg-blue-50 px-2 py-1 rounded border border-blue-100">GF</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="order-1 lg:order-2">
                            <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center text-orange-700 mb-6"><i data-lucide="tag" class="w-6 h-6"></i></div>
                            <h3 class="font-display font-medium text-3xl text-primary mb-4">Automated Labeling</h3>
                            <p class="text-text-muted text-lg leading-relaxed mb-6 font-light">Generate allergen flags, dietary tags (Vegan, Keto, GF), and calorie counts for thousands of menu items instantly. Keep your menu dynamic and compliant without the manual data entry.</p>
                            <a href="/docs.html" class="text-primary font-medium hover:underline flex items-center gap-2">Read Case Study <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- CTA -->
        <section class="py-24 bg-primary text-white relative overflow-hidden">
            <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
            <div class="max-w-4xl mx-auto px-6 text-center relative z-10">
                <h2 class="font-display font-medium text-4xl md:text-5xl mb-6">Start building with Recipe Base.</h2>
                <p class="text-lg text-white/80 mb-10 max-w-xl mx-auto font-light">Get your API key today and structure the culinary world.</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/admin.html" class="px-8 py-4 bg-white text-primary rounded-full font-bold hover:bg-earth-100 transition-colors">Get API Key</a>
                    <a href="mailto:sales@wearemachina.com" class="px-8 py-4 border border-white/30 text-white rounded-full font-bold hover:bg-white/10 transition-colors">Contact Sales</a>
                </div>
            </div>
        </section>

                <!-- Footer -->

                <footer class="bg-white border-t border-border py-16 px-6">

                    <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-start gap-12">

                        <div>

                            <a href="/" class="flex items-center gap-2 mb-4">

                                <img src="/logo.svg" alt="Recipe Base" class="h-6 w-auto">

                            </a>

                            <p class="text-sm text-text-muted max-w-xs font-light">

                                Building the standard for culinary data.

                            </p>

                        </div>
                <div class="flex gap-16 text-sm">
                    <div class="flex flex-col gap-3"><span class="font-bold text-primary mb-1">Product</span><a href="/recipes.html" class="text-text-muted hover:text-primary transition-colors">Database</a><a href="/lab.html" class="text-text-muted hover:text-primary transition-colors">Nutrition Lab</a></div>
                    <div class="flex flex-col gap-3"><span class="font-bold text-primary mb-1">Developers</span><a href="/docs.html" class="text-text-muted hover:text-primary transition-colors">Documentation</a><a href="/admin.html" class="text-text-muted hover:text-primary transition-colors">Status</a></div>
                </div>
            </div>
            <div class="max-w-6xl mx-auto mt-12 pt-8 border-t border-border text-xs text-text-light flex justify-between"><span>© 2025 Recipe Base Inc.</span><span>v1.6 Ceramic</span></div>
        </footer>
    </main>

    <script>
        lucide.createIcons();

        // --- Demo Logic ---
        const presets = {
            keto: "2 eggs\n1 avocado\n2 slices bacon",
            vegan: "1 cup quinoa\n1 cup chickpeas\n1 tbsp tahini\n1 cup spinach",
            baking: "2 cups flour\n1 cup sugar\n1/2 cup butter\n2 eggs"
        };

        function setPreset(key) {
            document.getElementById('demo-input').value = presets[key];
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            document.getElementById('chip-' + key).classList.add('active');
        }

        function setView(mode) {
            const visual = document.getElementById('view-visual');
            const json = document.getElementById('view-json');
            const btnVisual = document.getElementById('btn-visual');
            const btnJson = document.getElementById('btn-json');

            if (mode === 'visual') {
                visual.classList.remove('hidden'); json.classList.add('hidden');
                btnVisual.classList.add('bg-white', 'shadow-sm', 'text-primary'); btnJson.classList.remove('bg-white', 'shadow-sm', 'text-primary');
            } else {
                visual.classList.add('hidden'); json.classList.remove('hidden');
                btnJson.classList.add('bg-white', 'shadow-sm', 'text-primary'); btnVisual.classList.remove('bg-white', 'shadow-sm', 'text-primary');
            }
        }

        document.getElementById('run-demo-btn').addEventListener('click', async () => {
            const input = document.getElementById('demo-input').value;
            const visual = document.getElementById('view-visual');
            const json = document.getElementById('view-json');
            
            // Loading State
            visual.innerHTML = '<div class="h-full flex items-center justify-center opacity-60"><div class="animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full"></div></div>';
            json.textContent = '// Processing...';

            const ingredients = input.split('\n').map(l => l.trim()).filter(l => l);
            try {
                const res = await fetch('/nutrition/analyze', {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ ingredients })
                });
                const data = await res.json();
                const t = data.total;

                // Render JSON
                json.textContent = JSON.stringify(data, null, 2);

                // Render Visual
                visual.innerHTML = `
                    <div class="space-y-6 animate-fade-in">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 bg-earth-50 rounded-xl border border-border">
                                <span class="text-xs text-text-light uppercase tracking-wide">Calories</span>
                                <span class="block text-2xl font-mono text-primary font-bold">${Math.round(t.calories)}</span>
                            </div>
                            <div class="p-4 bg-earth-50 rounded-xl border border-border">
                                <span class="text-xs text-text-light uppercase tracking-wide">Protein</span>
                                <span class="block text-2xl font-mono text-primary font-bold">${Math.round(t.protein)}g</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-2 text-center text-xs">
                            <div class="p-2 bg-white border border-border rounded-lg"><span class="block text-text-light">Carbs</span><span class="font-bold">${Math.round(t.carbs)}g</span></div>
                            <div class="p-2 bg-white border border-border rounded-lg"><span class="block text-text-light">Fats</span><span class="font-bold">${Math.round(t.fat)}g</span></div>
                            <div class="p-2 bg-white border border-border rounded-lg border-green-100 bg-green-50/50"><span class="block text-green-700">Vit C</span><span class="font-bold text-green-800">${Math.round(t.vitamin_c_mg)}mg</span></div>
                        </div>
                        <div class="border-t border-border pt-4">
                            <h4 class="text-xs font-bold uppercase tracking-widest text-text-muted mb-3">Item Breakdown</h4>
                            <div class="space-y-2 max-h-[200px] overflow-auto pr-2 custom-scrollbar">
                                ${data.breakdown.map(b => `
                                    <div class="flex justify-between text-sm py-2 border-b border-border/50 last:border-0">
                                        <span class="text-text-main">${b.parsed.name}</span>
                                        <span class="font-mono text-text-muted">${Math.round(b.stats.calories)} kcal</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            } catch (e) {
                visual.innerHTML = `<div class="text-red-500 text-center p-4">Error: ${e.message}</div>`;
                json.textContent = '// Error: ' + e.message;
            }
        });

        // Mobile Menu
        const toggle = document.getElementById('mobile-menu-toggle');
        const close = document.getElementById('mobile-menu-close');
        const menu = document.getElementById('mobile-menu');
        function toggleMenu() { menu.classList.toggle('translate-x-full'); document.body.classList.toggle('overflow-hidden'); }
        toggle.addEventListener('click', toggleMenu);
        close.addEventListener('click', toggleMenu);

        // Shader
        class GodRaysBackground { constructor(canvasId, color1, color2, speed=0.002) { this.canvas = document.getElementById(canvasId); if (!this.canvas) return; this.renderer = new THREE.WebGLRenderer({ canvas: this.canvas, alpha: true }); this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); this.scene = new THREE.Scene(); this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1); this.uniforms = { uTime: { value: 0 }, uResolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }, uColor1: { value: new THREE.Color(color1) }, uColor2: { value: new THREE.Color(color2) } }; this.scene.add(new THREE.Mesh(new THREE.PlaneGeometry(2, 2), new THREE.ShaderMaterial({ uniforms: this.uniforms, vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4(position, 1.0); }`, fragmentShader: `uniform float uTime; uniform vec2 uResolution; uniform vec3 uColor1; uniform vec3 uColor2; varying vec2 vUv; vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); } float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i  = floor(v + dot(v, C.yy)); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x  = a0.x  * x0.x  + h.x  * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); } float fbm(vec2 st) { float v = 0.0; float a = 0.5; for (int i = 0; i < 3; i++) { v += a * snoise(st); st *= 2.0; a *= 0.5; } return v; } void main() { vec2 st = gl_FragCoord.xy / uResolution.xy; st.x *= uResolution.x / uResolution.y; vec2 raySt = st; raySt.x += raySt.y * 0.4; raySt.y -= uTime * 0.05; float noise = fbm(raySt * 3.0); float warp = snoise(st * 2.0 + uTime * 0.1); float rays = fbm(raySt * 4.0 + warp * 0.5); rays = smoothstep(-0.2, 0.8, rays); vec3 color = mix(uColor1, uColor2, 0.03); color += rays * 0.08; float vignette = 1.0 - length(vUv - 0.5) * 0.5; color *= vignette; gl_FragColor = vec4(color, 1.0); }` }))); this.animate = this.animate.bind(this); this.handleResize = this.handleResize.bind(this); window.addEventListener('resize', this.handleResize); this.handleResize(); this.animate(); } handleResize() { const w = window.innerWidth; const h = window.innerHeight; this.renderer.setSize(w, h); this.uniforms.uResolution.value.set(w, h); } animate() { requestAnimationFrame(this.animate); this.uniforms.uTime.value += 0.002; this.renderer.render(this.scene, this.camera); } } new GodRaysBackground('bg-canvas', '#fcfaf7', '#254a31');
    </script>
</body>
</html>